if("object"==typeof fcaPcOptions&&fcaPcOptions.video_enabled){class e{constructor(){this.events={}}on(e,t){return"object"!=typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(t),()=>this.removeListener(e,t)}removeListener(e,t){if("object"==typeof this.events[e]){const i=this.events[e].indexOf(t);i>-1&&this.events[e].splice(i,1)}}emit(e,...t){"object"==typeof this.events[e]&&this.events[e].forEach((e=>e.apply(this,t)))}once(e,t){const i=this.on(e,((...e)=>{i(),t.apply(this,e)}))}}class t extends e{constructor(e){super(),this.video_ready=!1,void 0!==typeof e&&(this.element=e,this.init())}init(){this.setup_events(),this.type=this.video_type(),this.load_api()}load_api(){switch(this.type){case"YOUTUBE":this.api_youtube_load();break;case"WISTIA":this.api_wistia_load();break;case"VIMEO":this.api_vimeo_load()}}setup_events(){this.on("api_youtube_loaded",this.api_youtube_setup),this.on("api_vimeo_loaded",this.api_vimeo_setup),this.on("api_wistia_loaded",this.api_wistia_setup)}video_type(){let e=this.element.attr("src");return""===e?(this.revoke("pixel cat video: video link not found."),!1):e.indexOf("youtube.com")>-1?"YOUTUBE":e.indexOf("vimeo.com")>-1?"VIMEO":e.indexOf("fast.wistia.com")>-1?"WISTIA":void 0}revoke(e){fcaPcOptions.debug&&(console.log(e),console.log("pixel cat video: revoked "))}api_vimeo_load(){jQuery.getScript("https://player.vimeo.com/api/player.js",(()=>{this.emit("api_vimeo_loaded")}))}api_vimeo_setup(){let e=this.element[0];try{this.api=new Vimeo.Player(e),this.api.ready().then((()=>{this.api_vimeo_ready()}))}catch(e){return void(fcaPcOptions.debug&&console.log(e.message))}}api_vimeo_ready(){fcaPcOptions.debug&&console.log("Pixel Cat video: Vimeo video ready"),this.video_ready=!0,this.api.getVideoId().then((e=>{this.video_id=e})),this.api.getVideoTitle().then((e=>{this.title=e})),this.api.getVideoUrl().then((e=>{this.url=e})),this.api.getDuration().then((e=>{this.duration=e})),this.events_triggered={},this.api_vimeo_state_change()}api_vimeo_state_change(){this.api.on("play",(e=>{this.trigger_event("VideoPlay"),this.timer=setInterval(this.track_progress.bind(this),1e3)})),this.api.on("pause",(e=>{this.trigger_event("VideoPause",{percentage_watched:this.percentage_watched()+"%"}),clearInterval(this.timer)})),this.api.on("ended",(e=>{this.trigger_event("VideoWatchToEnd"),clearInterval(this.timer)}))}api_wistia_load(){jQuery.getScript("//fast.wistia.net/assets/external/E-v1.js",(()=>{this.emit("api_wistia_loaded")}))}api_wistia_setup(){let e=this.element.attr("src");if(void 0===e)return;let t=e.match(/(https:\/\/fast\.wistia\.com\/embed\/medias)\/(.*)\.jsonp/);if(null===t)return void(fcaPcOptions.debug&&console.log("no video id match"));this.url=t[1];let i=t[2];void 0!==i?(window._wq=window._wq||[],this.api=window._wq,this.api.push({id:i,onReady:this.api_wistia_ready.bind(this)})):fcaPcOptions.debug&&console.log("pixel cat video: wistia video_id not found.")}api_wistia_ready(e){fcaPcOptions.debug&&console.log("pixel cat video: wistia video ready."),this.video_ready=!0,this.api=e,this.video_id=e.data.media.hashedId,this.title=void 0!==e.data.media.name?e.data.media.name:"Untitled",this.url=this.url+"/"+this.video_id,this.events_triggered={},this.api_wistia_state_change.bind(this)()}api_wistia_state_change(){this.api.bind("play",(e=>{this.trigger_event("VideoPlay")})),this.api.bind("pause",(e=>{this.trigger_event("VideoPause",{percentage_watched:this.percentage_watched()+"%"})})),this.api.bind("percentwatchedchanged",((e,t)=>{this.track_progress()})),this.api.bind("end",(e=>{this.trigger_event("VideoWatchToEnd")}))}api_youtube_load(){this.load_async_script("https://www.youtube.com/iframe_api")}api_youtube_setup(){let e=this.element[0];this.api=new YT.Player(e,{events:{onReady:this.api_youtube_ready.bind(this),onStateChange:this.api_youtube_state_change.bind(this)}})}api_youtube_ready(e){fcaPcOptions.debug&&console.log("pixel cat video: youtube video ready"),this.video_ready=!0,this.data=this.api.getVideoData(),this.video_id=this.data.video_id,this.title=this.data.title,this.url=this.api.getVideoUrl(),this.events_triggered={}}api_youtube_state_change(e){switch(fcaPcOptions.debug&&console.log(e),e.data){case 0:this.trigger_event("VideoWatchToEnd"),clearInterval(this.timer);break;case 1:this.trigger_event("VideoPlay"),this.timer=setInterval(this.track_progress.bind(this),1e3);break;case 2:this.trigger_event("VideoPause",{percentage_watched:this.percentage_watched()+"%"}),clearInterval(this.timer)}}video_youtube_end(){fcaPcOptions.debug&&console.log("end")}load_async_script(e){let t=document.createElement("script"),i=document.getElementsByTagName("script")[0];t.src=e,i.parentNode.insertBefore(t,i),fcaPcOptions.debug&&console.log("pixel cat video: "+e+" has been loaded.")}track_progress(){switch(this.video_type()){case"YOUTUBE":case"VIMEO":case"WISTIA":this.video_track_progress()}}video_track_progress(){let e=this.percentage_watched();switch(fcaPcOptions.debug&&console.log(this.percentage_watched()),!0){case e>=10&&e<25:this.trigger_event("VideoWatch10Percent");break;case e>=25&&e<50:this.trigger_event("VideoWatch25Percent");break;case e>=50&&e<75:this.trigger_event("VideoWatch50Percent");break;case e>=75&&e<90:this.trigger_event("VideoWatch75Percent");break;case e>=90&&e<100:this.trigger_event("VideoWatch90Percent")}}video_params(){return{video_title:this.title,video_url:this.url,video_id:this.video_id}}percentage_watched(){switch(this.type){case"YOUTUBE":return Math.round(this.api.getCurrentTime()/this.api.getDuration()*100);case"VIMEO":return this.api.getCurrentTime().then((e=>{this.current_time=e})),Math.round(this.current_time/this.duration*100);case"WISTIA":return Math.round(this.api.time()/this.api.duration()*100);default:return!1}}trigger_event(e,t={}){if(this.events_triggered[e])return;let i=Object.assign({},this.video_params(),t);this.emit("pixel_event","trackCustom",e,i),"VideoPause"!==e&&(this.events_triggered[e]=!0)}}function onYouTubeIframeAPIReady(){fcaPcVideos.forEach((e=>{"YOUTUBE"===e.type&&e.emit("api_youtube_loaded")}))}function detect_videos(){let e=[];jQuery("iframe").each((function(){var t=jQuery(this)[0].src.includes("?")?"&":"?";jQuery(this)[0].src=jQuery(this)[0].src+t+"enablejsapi=1",e.push(jQuery(this))})),jQuery("script").each((function(){let t=jQuery(this).attr("src");void 0!==t&&-1!==t.indexOf("https://fast.wistia.com/embed/medias/")&&e.push(jQuery(this))})),0!==e.length?e.forEach((function(e){window.fcaPcVideos.push(new t(e))})):fcaPcOptions.debug&&console.log("No videos detected")}t.prototype.__proto__=e.prototype,window.fcaPcVideos=[],detect_videos()}